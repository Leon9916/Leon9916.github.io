<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>å“åº”å¼åŸç†ï¼šå‰¯ä½œç”¨å‡½æ•°æ¢ç§˜ - çˆ·ã‚æœ¬éœ¸æ°”ã£</title><meta description="æŠ€æœ¯åˆ†äº«,å‰ç«¯å¼€å‘,æ•°æ®æ¥å£,ç®—æ³•"><meta property="og:type" content="blog"><meta property="og:title" content="çˆ·ã‚æœ¬éœ¸æ°”ã£"><meta property="og:url" content="https://removeif.github.io/"><meta property="og:site_name" content="çˆ·ã‚æœ¬éœ¸æ°”ã£"><meta property="og:description" content="æŠ€æœ¯åˆ†äº«,å‰ç«¯å¼€å‘,æ•°æ®æ¥å£,ç®—æ³•"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://p3-passport.byteimg.com/img/user-avatar/d8bc7351ac3c93b11cd3146be24a0cba~100x100.awebp"><meta property="article:published_time" content="2022-08-17T11:13:16.000Z"><meta property="article:modified_time" content="2023-05-25T17:52:29.431Z"><meta property="article:author" content="removeif"><meta property="article:tag" content="categories-tool"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://p3-passport.byteimg.com/img/user-avatar/d8bc7351ac3c93b11cd3146be24a0cba~100x100.awebp"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://removeif.github.io/"},"headline":"çˆ·ã‚æœ¬éœ¸æ°”ã£","image":[],"datePublished":"2022-08-17T11:13:16.000Z","dateModified":"2023-05-25T17:52:29.431Z","author":{"@type":"Person","name":"removeif"},"description":"æŠ€æœ¯åˆ†äº«,å‰ç«¯å¼€å‘,æ•°æ®æ¥å£,ç®—æ³•"}</script><link rel="alternative" href="/atom.xml" title="çˆ·ã‚æœ¬éœ¸æ°”ã£" type="application/atom+xml"><link rel="icon" href="https://p3-passport.byteimg.com/img/user-avatar/d8bc7351ac3c93b11cd3146be24a0cba~100x100.awebp"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext"><style>body>.footer,body>.navbar,body>.section{opacity:1}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><link rel="stylesheet" href="/css/style.css"><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="/js/globalUtils.js"></script><link rel="stylesheet" href="/live2d/waifu.css"><script type="text/javascript" async src="/live2d/autoload.js"></script></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://s1.ax1x.com/2023/05/25/p9H4zND.png" alt="çˆ·ã‚æœ¬éœ¸æ°”ã£" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">é¦–é¡µ</a><a class="navbar-item" href="/categories">åˆ†ç±»</a><a class="navbar-item" href="/media">å½±éŸ³</a><a class="navbar-item" href="/album">ç›¸å†Œ</a><a class="navbar-item" href="/about">å…³äº</a><a class="navbar-item" href="/chat_brother">Chatå“¥</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Leon9916/hexo-blog"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="ç›®å½•" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="æœç´¢" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="thumbnail" src="https://cdn-us.imgs.moe/2023/05/26/646f9fde38e7e.png" alt="å“åº”å¼åŸç†ï¼šå‰¯ä½œç”¨å‡½æ•°æ¢ç§˜"></span></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="fas fa-folder-open has-text-grey">Â </i><a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a><span>Â /Â </span><a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5Vue3%E5%8E%9F%E7%90%86/">æ·±å…¥Vue3åŸç†</a></span><span class="level-item">25 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 3727 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile">å“åº”å¼åŸç†ï¼šå‰¯ä½œç”¨å‡½æ•°æ¢ç§˜</h1><div class="content"><blockquote>
<p>æˆ‘ä»¬è¯´åˆ°äº† [Reactive]{.mark} ä¼šåœ¨ [proxy<br>getter]{.mark} çš„æ—¶å€™æ”¶é›† [effect]{.mark} ä¾èµ–ï¼Œåœ¨ [proxy<br>setter]{.mark} çš„æ—¶å€™è§¦å‘ [effect]{.mark} çš„æ‰§è¡Œã€‚é‚£ä¹ˆ [effect]{.mark} å‰¯ä½œç”¨å‡½æ•°åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆï¼Ÿä»¥åŠæ˜¯å¦‚ä½•è¢«æ”¶é›†èµ·æ¥çš„å‘¢ï¼Ÿ</p>
</blockquote>
<a id="more"></a>

<p><strong>å‰è¨€</strong></p>
<p>æˆ‘ä»¬è¯´åˆ°äº† [Reactive]{.mark} ä¼šåœ¨ [proxy<br>getter]{.mark} çš„æ—¶å€™æ”¶é›† [effect]{.mark} ä¾èµ–ï¼Œåœ¨ [proxy<br>setter]{.mark} çš„æ—¶å€™è§¦å‘ [effect]{.mark} çš„æ‰§è¡Œã€‚é‚£ä¹ˆ [effect]{.mark} å‰¯ä½œç”¨å‡½æ•°åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆï¼Ÿä»¥åŠæ˜¯å¦‚ä½•è¢«æ”¶é›†èµ·æ¥çš„å‘¢ï¼Ÿ</p>
<p><strong>effect</strong></p>
<p>æ‰¾åˆ°æºç ä¸­å…³äº [effect]{.mark} éƒ¨åˆ†çš„å®šä¹‰ï¼š</p>
<p>export function effect (fn, options) {</p>
<p>// å¦‚æœ fn å·²ç»æ˜¯ä¸€ä¸ª effect å‡½æ•°äº†ï¼Œåˆ™æŒ‡å‘åŸå§‹å‡½æ•°</p>
<p>if (fn.effect) {</p>
<p>fn = fn.effect.fn</p>
<p>}</p>
<p>// æ„é€  _effect å®ä¾‹</p>
<p>const _effect = new ReactiveEffect(fn)</p>
<p>// options åˆå§‹åŒ–</p>
<p>if (options) {</p>
<p>extend(_effect, options)</p>
<p>if (options.scope) recordEffectScope(_effect, options.scope)</p>
<p>}</p>
<p>// å¦‚æœ‰ options æˆ–è€… ä¸æ˜¯æ‡’åŠ è½½ï¼Œæ‰§è¡Œ _effect.run()</p>
<p>if (!options || !options.lazy) {</p>
<p>_effect.run()</p>
<p>}</p>
<p>// è¿”å› _effect.run</p>
<p>const runner = _effect.run.bind(_effect)</p>
<p>runner.effect = _effect</p>
<p>return runner</p>
<p>}</p>
<p>è¿™ä¸ª [effect]{.mark} å‡½æ•°å†…éƒ¨æ ¸å¿ƒæ˜¯é€šè¿‡ [ReactiveEffect]{.mark} ç±»åˆ›å»ºäº†ä¸€ä¸ª [_effect]{.mark} å®ä¾‹ï¼Œä»ä»£ç æ¥çœ‹ï¼Œ[_effect]{.mark} ä¸ŠåŒ…å«äº†ä¸€ä¸ª [run]{.mark} å‡½æ•°ã€‚é»˜è®¤ [effect]{.mark} æ˜¯æ²¡æœ‰ä¼ å…¥ [options]{.mark} å‚æ•°çš„ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥æ‰§è¡Œäº† [_effect.run()]{.mark}ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œ[fn]{.mark} å‡½æ•°æ˜¯åœ¨ [effect]{.mark} å‡½æ•°ä¸­çš„ä¸€ä¸ªå…¥å‚ï¼Œæ¯”å¦‚ï¼š</p>
<p>const state = reactive({a: 1})</p>
<p>effect(() =&gt; console.log(state.a))</p>
<p>æ ¹æ®ä¸Šä¸€å°èŠ‚ï¼Œæˆ‘ä»¬çŸ¥é“å› ä¸ºè¿™é‡Œæˆ‘ä»¬è®¿é—®äº† [state.a]{.mark} æ‰€ä»¥æ”¶é›†äº†å‰¯ä½œç”¨å‡½æ•°ï¼Œä½†æ˜¯éœ€è¦çŸ¥é“çš„æ˜¯è¿™é‡Œçš„ [effect]{.mark} ä¼ å…¥çš„æ˜¯ä¸€ä¸ª [fn]{.mark}ï¼Œæ‰€ä»¥è¦æƒ³è®¿é—® [state.a]{.mark} é‚£è¿™ä¸ª [fn]{.mark} å¿…é¡»è¦æ‰§è¡Œæ‰å¯ä»¥ã€‚é‚£æ˜¯åœ¨å“ªé‡Œæ‰§è¡Œçš„å‘¢ï¼Ÿæ¥ä¸‹æ¥çœ‹ä¸€ä¸‹ [ReactiveEffect]{.mark} çš„å®ç°ï¼š</p>
<p>// ç”¨äºè®°å½•ä½äºå“åº”ä¸Šä¸‹æ–‡ä¸­çš„effectåµŒå¥—å±‚æ¬¡æ•°</p>
<p>let effectTrackDepth = 0</p>
<p>// äºŒè¿›åˆ¶ä½ï¼Œæ¯ä¸€ä½ç”¨äºæ ‡è¯†å½“å‰effectåµŒå¥—å±‚çº§çš„ä¾èµ–æ”¶é›†çš„å¯ç”¨çŠ¶æ€</p>
<p>export left trackOpBit = 1</p>
<p>// è¡¨ç¤ºæœ€å¤§æ ‡è®°çš„ä½æ•°</p>
<p>const maxMarkerBits = 30</p>
<p>// å½“å‰æ´»è·ƒçš„ effect</p>
<p>let activeEffect;</p>
<p>export class ReactiveEffect {</p>
<p>// ç”¨äºæ ‡è¯†å‰¯ä½œç”¨å‡½æ•°æ˜¯å¦ä½äºå“åº”å¼ä¸Šä¸‹æ–‡ä¸­è¢«æ‰§è¡Œ</p>
<p>active = true</p>
<p>// å‰¯ä½œç”¨å‡½æ•°æŒæœ‰å®ƒæ‰€åœ¨çš„æ‰€æœ‰ä¾èµ–é›†åˆçš„å¼•ç”¨ï¼Œç”¨äºä»è¿™äº›ä¾èµ–é›†åˆåˆ é™¤è‡ªèº«</p>
<p>deps = []</p>
<p>// æŒ‡é’ˆä¸ºï¼Œç”¨äºåµŒå¥— effect æ‰§è¡ŒååŠ¨æ€åˆ‡æ¢ activeEffect</p>
<p>parent = undefined</p>
<p>// ...</p>
<p>run() {</p>
<p>// è‹¥å½“å‰ ReactiveEffect å¯¹è±¡è„±ç¦»å“åº”å¼ä¸Šä¸‹æ–‡</p>
<p>// é‚£ä¹ˆå…¶å¯¹åº”çš„å‰¯ä½œç”¨å‡½æ•°è¢«æ‰§è¡Œæ—¶ä¸ä¼šå†æ”¶é›†ä¾èµ–</p>
<p>if (!this.active) {</p>
<p>return this.fn()</p>
<p>}</p>
<p>// ç¼“å­˜æ˜¯å¦éœ€è¦æ”¶é›†ä¾èµ–</p>
<p>let lastShouldTrack = shouldTrack</p>
<p>try {</p>
<p>// ä¿å­˜ä¸Šä¸€ä¸ª activeEffect åˆ°å½“å‰çš„ parent ä¸Š</p>
<p>this.parent = activeEffect</p>
<p>// activeEffect æŒ‡å‘å½“å‰çš„ effect</p>
<p>activeEffect = this</p>
<p>// shouldTrack ç½®æˆ true</p>
<p>shouldTrack = true</p>
<p>// å·¦ç§»æ“ä½œç¬¦ &lt;&lt; å°†ç¬¬ä¸€ä¸ªæ“ä½œæ•°å‘å·¦ç§»åŠ¨æŒ‡å®šä½æ•°</p>
<p>// å·¦è¾¹è¶…å‡ºçš„ä½æ•°å°†ä¼šè¢«æ¸…é™¤ï¼Œå³è¾¹å°†ä¼šè¡¥é›¶ã€‚</p>
<p>// trackOpBit æ˜¯åŸºäº 1 å·¦ç§» effectTrackDepth ä½</p>
<p>trackOpBit = 1 &lt;&lt; ++effectTrackDepth</p>
<p>// å¦‚æœæœªè¶…è¿‡æœ€å¤§åµŒå¥—å±‚æ•°ï¼Œåˆ™æ‰§è¡Œ initDepMarkers</p>
<p>if (effectTrackDepth &lt;= maxMarkerBits) {</p>
<p>initDepMarkers(this)</p>
<p>} else {</p>
<p>cleanupEffect(this)</p>
<p>}</p>
<p>// è¿™é‡Œæ‰§è¡Œäº† fn</p>
<p>return this.fn()</p>
<p>} finally {</p>
<p>if (effectTrackDepth &lt;= maxMarkerBits) {</p>
<p>// ç”¨äºå¯¹æ›¾ç»è·Ÿè¸ªè¿‡ï¼Œä½†æœ¬æ¬¡å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œæ—¶æ²¡æœ‰è·Ÿè¸ªçš„ä¾èµ–é‡‡å–åˆ é™¤æ“ä½œã€‚</p>
<p>// æ–°è·Ÿè¸ªçš„ å’Œ æœ¬è½®è·Ÿè¸ªè¿‡çš„éƒ½ä¼šè¢«ä¿ç•™</p>
<p>finalizeDepMarkers(this)</p>
<p>}</p>
<p>// &lt;&lt; --effectTrackDepth å³ç§»åŠ¨ effectTrackDepth ä½</p>
<p>trackOpBit = 1 &lt;&lt; --effectTrackDepth</p>
<p>// è¿”å›ä¸Šä¸ª activeEffect</p>
<p>activeEffect = this.parent</p>
<p>// è¿”å›ä¸Šä¸ª shouldTrack</p>
<p>shouldTrack = lastShouldTrack</p>
<p>// æƒ…å†µæœ¬æ¬¡çš„ parent æŒ‡å‘</p>
<p>this.parent = undefined</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p>å¤§è‡´çœ‹ä¸€çœ¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ [ReactiveEffect]{.mark} ä¸­æ˜¯æ‰§è¡Œäº† [this.fn()]{.mark} çš„ï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº† [effect]{.mark} ä¸­çš„å›è°ƒå‡½æ•° [fn]{.mark} æ˜¯åœ¨è¿™é‡Œè¢«è°ƒç”¨çš„ã€‚æ¥ä¸‹æ¥è¯¦ç»†ç ”ç©¶ä¸€ä¸‹è¿™ä¸ª [ReactiveEffect]{.mark}ã€‚</p>
<p>ä½†è¿™æ®µä»£ç çœ‹èµ·æ¥ä¸æ˜¯å¾ˆé•¿ï¼Œä½†æ¶‰åŠäº†å¥½å‡ ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬æ¥ä¸€ä¸ªä¸ªçœ‹ã€‚</p>
<p><strong>1. parent çš„ä½œç”¨</strong></p>
<p>ä¸ºä»€ä¹ˆ [ReactiveEffect]{.mark} è¦è®¾è®¡ä¸€ä¸ª [parent]{.mark} è¿™æ ·ä¸€ä¸ªçœ‹ä¼¼æ²¡å•¥ç”¨çš„å˜é‡æŒ‡é’ˆæ¥å­˜å‚¨ä¸Šä¸€æ¬¡çš„ [activeEffect]{.mark} å‘¢ï¼Ÿå¦‚æœæ”¹æˆä¸‹é¢è¿™æ ·ä¸æ˜¯æ›´ç®€å•å—ï¼Ÿ</p>
<p>run() {</p>
<p>if (!this.active) {</p>
<p>return this.fn();</p>
<p>}</p>
<p>// åˆå§‹åŒ–</p>
<p>shouldTrack = true;</p>
<p>activeEffect = this;</p>
<p>const result = this.fn();</p>
<p>// é‡ç½®</p>
<p>shouldTrack = false;</p>
<p>return result;</p>
<p>}</p>
<p>å…¶å®å¯¹äºä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š</p>
<p>const state = reactive({a: 1})</p>
<p>effect(() =&gt; console.log(state.a))</p>
<p>state.a++</p>
<p>[effect]{.mark} å‡½æ•°å†…è°ƒç”¨ [ReactiveEffect]{.mark} å®ä¾‹çš„ [run]{.mark} å‡½æ•°ã€‚[run]{.mark} å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼ŒæŠŠ [activeEffect]{.mark} æŒ‡å‘ [this]{.mark}ã€‚ç„¶åæ‰§è¡Œ [effect]{.mark} ä¼ å…¥çš„ [fn]{.mark} å‡½æ•°ï¼Œå‡½æ•°åœ¨æ‰§è¡Œçš„æ—¶å€™è®¿é—®äº† [state.a]{.mark} è§¦å‘äº† [getter]{.mark} é’©å­ã€‚å›é¡¾ä¸€ä¸‹ä¸Šä¸€èŠ‚çš„å†…å®¹ï¼Œ[getter]{.mark} çš„æ—¶å€™æœ‰è§¦å‘æ·»åŠ  [activeEffect]{.mark} çš„åŠŸèƒ½ï¼š</p>
<p>// æŠŠ activeEffect æ·»åŠ åˆ° dep ä¸­</p>
<p>dep.add(activeEffect!)</p>
<p>è€Œ [activeEffect]{.mark} æ­£æ˜¯è¿™é‡Œçš„ [this]{.mark}ã€‚å½“æ‰§è¡Œ [state.a++]{.mark} æ—¶ï¼Œè®¿é—®äº†[state.a]{.mark} çš„ [setter]{.mark}ã€‚ä¸Šä¸€èŠ‚ä¹Ÿè¯´äº†ï¼Œ[setter]{.mark} çš„æ‰§è¡Œä¼šè°ƒç”¨ [effect.run]{.mark} å‡½æ•°ï¼š</p>
<p>// triggerEffects</p>
<p>effect.run();</p>
<p>æ‰€ä»¥åˆä¼šæ‰§è¡Œ [fn]{.mark}ã€‚</p>
<p>åˆ°è¿™é‡Œçœ‹ä¼¼å¾ˆå®Œç¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬å†æ¥çœ‹å¦å¤–ä¸€ä¸ªä¾‹å­ğŸŒ°ï¼š</p>
<p>const state = reactive({</p>
<p>a: 1,</p>
<p>b: 2</p>
<p>});</p>
<p>// ef1</p>
<p>effect(() =&gt; {</p>
<p>// ef2</p>
<p>effect(() =&gt; console.log(`b: ${state.b}`))</p>
<p>console.log(`a: ${state.a}`)</p>
<p>});</p>
<p>state.a ++</p>
<p>æŒ‰ç…§ä¸Šé¢çš„é€»è¾‘ï¼Œåœ¨ç¬¬ä¸€æ¬¡ [effect]{.mark} æ‰§è¡Œçš„æ—¶å€™ï¼Œ[activeEffect =<br>ef1]{.mark} ç„¶åå†æ‰§è¡Œå†…éƒ¨çš„ [effect]{.mark}ï¼Œ æ­¤æ—¶ [activeEffect =<br>ef2]{.mark} ç„¶å [ef2]{.mark} æ‰§è¡Œå®Œæˆå›åˆ° [ef1]{.mark} å‡½æ•°ä½“å†…ï¼Œæ­¤æ—¶å†è®¿é—® [state.a]{.mark} è§¦å‘å¯¹ [a]{.mark} çš„ä¾èµ–æ”¶é›†ï¼Œä½†æ”¶é›†åˆ°çš„å´æ˜¯ [ef2]{.mark}ã€‚é‚£ä¹ˆæœ€ç»ˆæ‰“å°çš„æ˜¯ï¼š</p>
<p>b: 2</p>
<p>a: 1</p>
<p>b: 2</p>
<p>å¾ˆæ˜æ˜¾ä¸ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚ï¼Œæˆ‘ä»¬æœŸæœ›çš„æ˜¯è¾“å‡ºï¼š</p>
<p>b: 2</p>
<p>a: 1</p>
<p>b: 2</p>
<p>a: 2</p>
<p>è¿™æ—¶å€™ [parent]{.mark} å°±æ’ä¸Šç”¨åœºäº†ï¼Œå½“ä¸º [effect]{.mark} åŠ ä¸Š [parent]{.mark} å±æ€§åï¼Œæˆ‘ä»¬å†æ¥æ‹ä¸€ä¸‹æ•´ä½“çš„æµç¨‹ã€‚</p>
<p>æ‰§è¡Œ </p>
<p>ef1 çš„æ—¶å€™ï¼Œ</p>
<p>activeEffect æŒ‡å‘ </p>
<p>ef1ï¼Œæ­¤æ—¶ </p>
<p>parent æ˜¯ </p>
<p>undefinedã€‚</p>
<p>æ‰§è¡Œ </p>
<p>ef1 fn é‡åˆ°äº† </p>
<p>ef2ï¼Œè°ƒç”¨ </p>
<p>ef2 æ­¤æ—¶ </p>
<p>ef2 çš„ </p>
<p>parent æŒ‡å‘ </p>
<p>ef1ï¼Œ </p>
<p>activeEffect æŒ‡å‘ </p>
<p>ef2ã€‚ç„¶åæ‰§è¡Œ </p>
<p>ef2 çš„ fnã€‚</p>
<p>ef2 çš„ fn æ‰§è¡Œçš„æ—¶å€™ï¼Œè®¿é—®äº† </p>
<p>state.b ä¾èµ–æ”¶é›† </p>
<p>ef2ã€‚æ‰§è¡Œå®Œæˆåï¼Œ</p>
<p>activeEffect = this.parent åˆæŠŠ </p>
<p>activeEffect æŒ‡å‘äº† </p>
<p>ef1ã€‚</p>
<p>è¿”å› </p>
<p>ef1 çš„ </p>
<p>fn ä½“ç»§ç»­æ‰§è¡Œï¼Œæ­¤æ—¶è®¿é—® </p>
<p>state.a ä¾èµ–æ”¶é›† </p>
<p>activeEffect ä¸º </p>
<p>ef1ã€‚</p>
<p>è§¦å‘ </p>
<p>state.a çš„ </p>
<p>setterï¼Œè°ƒç”¨ </p>
<p>a çš„å‰¯ä½œç”¨ </p>
<p>ef1ï¼Œä¾æ¬¡æ‰“å°â€¦â€¦</p>
<p>åˆ°è¿™é‡Œç›¸ä¿¡å„ä½å°ä¼™ä¼´å·²ç»æ¸…æ¥šäº† [parent]{.mark} çš„ä½œç”¨äº†ï¼Œé‚£å°±æ˜¯<strong>é€šè¿‡ [parent]{.mark} è¿™ä¸ªæ ‡è®°ï¼Œæ¥å›åˆ‡æ¢ [activeEffect]{.mark} çš„æŒ‡å‘ï¼Œä»è€Œå®Œæˆå¯¹åµŒå¥— [effect]{.mark} çš„æ­£ç¡®çš„ä¾èµ–æ”¶é›†</strong>ã€‚</p>
<p><strong>2. ä¾èµ–æ¸…ç†</strong></p>
<p>åœ¨è¯´ä¾èµ–æ¸…ç†ä¹‹å‰ï¼Œå†æ¥çœ‹ä¸€ä¸ªæœ‰æ„æ€çš„ä¾‹å­ï¼š</p>
<p>const state = reactive({</p>
<p>a: 1,</p>
<p>show: true</p>
<p>});</p>
<p>effect(() =&gt; {</p>
<p>if (state.show) {</p>
<p>console.log(`a: ${state.a}`)</p>
<p>}</p>
<p>});</p>
<p>state.a ++</p>
<p>setTimeout(() =&gt; {</p>
<p>state.show = false</p>
<p>state.a ++</p>
<p>}, 1000)</p>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨ [effect]{.mark} ä¸­å®Œæˆäº†å¯¹ [show]{.mark} å’Œ [a]{.mark} çš„ä¾èµ–æ”¶é›†ï¼Œç„¶å [1s]{.mark} åï¼Œæˆ‘ä»¬æ”¹å˜äº† [show]{.mark} çš„çŠ¶æ€ä¸º [false]{.mark}ã€‚æ­¤æ—¶ [effect]{.mark} å†…çš„å‡½æ•°ä¸­çš„ [console.log]{.mark} å°†æ°¸è¿œä¸ä¼šæ‰§è¡Œï¼Œç„¶åå†è§¦å‘ [state.a++]{.mark} çš„åŠ¨ä½œï¼Œè®¿é—® [a]{.mark} çš„ [getter]{.mark}ï¼Œå¦‚æœæ²¡æœ‰ä¾èµ–æ¸…ç†ï¼Œé‚£ä¹ˆæŒ‰ç…§ä¹‹å‰çš„åšæ³•ï¼Œæµ‹è¯•ä¹Ÿä¼šè§¦å‘ [effect.fn]{.mark} çš„æ‰§è¡Œï¼Œä½†è¿™ä¸ªæ‰§è¡Œå…¶å®æ²¡æ„ä¹‰çš„ï¼Œå› ä¸º [a]{.mark} å·²ç»æ²¡æœ‰è¢«ä½¿ç”¨äº†ï¼Œæ˜¯ä¸€ä¸ªæ°¸è¿œä¸ä¼šè¢«è®¿é—®åˆ°çš„å˜é‡ï¼Œé€ æˆäº†æ€§èƒ½æµªè´¹ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ é™¤ [a]{.mark} çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œè®©å®ƒä¸è¦æ‰§è¡Œã€‚</p>
<p>æ¥ä¸‹æ¥ä¸€èµ·æ¥çœ‹çœ‹ [Vue]{.mark} æ˜¯æ€ä¹ˆåšçš„å§ï¼è¿™é‡Œæ¶‰åŠåˆ°çš„å†…å®¹æœ‰ç‚¹å¤šï¼Œæˆ‘ä»¬å…ˆä¸€ä¸ªä¸ªè§£é‡Šï¼Œé¦–å…ˆè¡¥ä¹ ä¸€ä¸‹å…³äº [js]{.mark} çš„ä¸€äº›æ“ä½œç¬¦çš„åŸºç¡€çŸ¥è¯†ã€‚</p>
<p><strong>1. å·¦ç§»ï¼ˆ&lt;&lt;ï¼‰</strong></p>
<p>å·¦ç§»æ“ä½œç¬¦ ([&lt;&lt;]{.mark}) å°†ç¬¬ä¸€ä¸ªæ“ä½œæ•°è½¬æ¢æˆ 2<br>è¿›åˆ¶åå‘å·¦ç§»åŠ¨æŒ‡å®šä½æ•°ï¼Œå·¦è¾¹è¶…å‡ºçš„ä½æ•°å°†ä¼šè¢«æ¸…é™¤ï¼Œå³è¾¹å°†ä¼šè¡¥é›¶ã€‚</p>
<p>const a = 1; // 00000000000000000000000000000001</p>
<p>const b = 1;</p>
<p>console.log(a &lt;&lt; b); // 00000000000000000000000000000010</p>
<p>// expected output: 2</p>
<p><strong>2. ä½æˆ–æ“ä½œï¼ˆ|ï¼‰</strong></p>
<p>ä½æˆ–æ“ä½œç¬¦ï¼ˆ|ï¼‰ï¼Œ å¦‚æœä¸¤ä½ä¹‹ä¸€ä¸º 1ï¼Œåˆ™è®¾ç½®æ¯ä½ä¸º 1ã€‚</p>
<p>const a = 5; // 00000000000000000000000000000101</p>
<p>const b = 3; // 00000000000000000000000000000011</p>
<p>console.log(a | b); // 00000000000000000000000000000111</p>
<p>// expected output: 7</p>
<p><strong>3. æŒ‰ä½ä¸ï¼ˆ&amp;ï¼‰</strong></p>
<p>æŒ‰ä½ä¸è¿ç®—ç¬¦ ([&amp;]{.mark})<br>åœ¨ä¸¤ä¸ªæ“ä½œæ•°å¯¹åº”çš„äºŒè¿›ä½éƒ½ä¸º [1]{.mark} æ—¶ï¼Œè¯¥ä½çš„ç»“æœå€¼æ‰ä¸º [1]{.mark}ï¼Œå¦åˆ™ä¸º [0]{.mark}ã€‚</p>
<p>const a = 5; // 00000000000000000000000000000101</p>
<p>const b = 3; // 00000000000000000000000000000011</p>
<p>console.log(a &amp; b); // 00000000000000000000000000000001</p>
<p>// expected output: 1</p>
<p><strong>4. æŒ‰ä½éï¼ˆ~ï¼‰</strong></p>
<p>æŒ‰ä½éè¿ç®—ç¬¦ï¼ˆ~ï¼‰ï¼Œåè½¬æ“ä½œæ•°çš„ä½ã€‚</p>
<p>const a = 5; // 00000000000000000000000000000101</p>
<p>const b = -3; // 11111111111111111111111111111101</p>
<p>console.log(~a); // 11111111111111111111111111111010</p>
<p>// expected output: -6</p>
<p>console.log(~b); // 00000000000000000000000000000010</p>
<p>// expected output: 2</p>
<p>æœ‰äº†è¿™äº›åŸºç¡€çš„çŸ¥è¯†ç‚¹åï¼Œå†æ¥è®¤è¯†å‡ ä¸ªå˜é‡ã€‚</p>
<p><strong>1. effectTrackDepth</strong></p>
<p>ç”¨äºè®°å½•ä½äºå“åº”ä¸Šä¸‹æ–‡ä¸­çš„ [effect]{.mark} åµŒå¥—å±‚æ¬¡æ•°ï¼Œé»˜è®¤å€¼ä¸º [0]{.mark}ã€‚</p>
<p>// effectTrackDepth = 0</p>
<p>effect(() =&gt; {</p>
<p>// effectTrackDepth = 1</p>
<p>effect(() =&gt; {})</p>
<p>})</p>
<p><strong>2. trackOpBit</strong></p>
<p>äºŒè¿›åˆ¶ä½ï¼Œæ¯ä¸€ä½ç”¨äºæ ‡è¯†å½“å‰ [effect]{.mark} åµŒå¥—å±‚çº§çš„ä¾èµ–æ”¶é›†çš„å¯ç”¨çŠ¶æ€ã€‚é»˜è®¤å€¼ä¸º [1]{.mark}ï¼Œå³ [00000000000000000000000000000001]{.mark}ã€‚</p>
<p><strong>3. maxMarkerBits</strong></p>
<p>è¡¨ç¤ºæœ€å¤§çš„ [effect]{.mark} åµŒå¥—çš„å±‚æ¬¡æ•°ï¼Œæœ€å¤§å€¼ä¸º [30]{.mark}ã€‚</p>
<p>å¥½äº†ï¼Œææ‡‚äº†è¿™äº›æ“ä½œç¬¦ä¹‹åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ [Vue]{.mark} çš„ä¾èµ–æ¸…ç†æ˜¯å¦‚ä½•å®ç°çš„ï¼Œå…ˆæ¥çœ‹ä¸è¶…è¿‡ [maxMarkerBits]{.mark} å±‚çº§æ•°çš„åµŒå¥— [effect]{.mark} çš„ä¾èµ–æ”¶é›†çš„è¿‡ç¨‹ï¼Œè¿˜ä»¥ä¸Šé¢é‚£ä¸ª [demo]{.mark} ä½œä¸ºç¤ºä¾‹ï¼š</p>
<p>const state = reactive({</p>
<p>a: 1,</p>
<p>show: true</p>
<p>});</p>
<p>effect(() =&gt; {</p>
<p>if (state.show) {</p>
<p>console.log(`a: ${state.a}`)</p>
<p>}</p>
<p>});</p>
<p>state.a ++</p>
<p>setTimeout(() =&gt; {</p>
<p>state.show = false</p>
<p>state.a ++</p>
<p>}, 1000)</p>
<p><strong>Step 1</strong>ï¼š[run]{.mark} å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œ[trackOpBit = 1 &lt;&lt;<br>++effectTrackDepth]{.mark} è¿™ä¸ªè¯­å¥æ‰§è¡Œå®Œæˆåï¼Œå¾—åˆ° [effectTrackDepth =<br>1]{.mark}ï¼›[trackOpBit.toString(2) =<br>00000000000000000000000000000010]{.mark}ã€‚</p>
<p><strong>Step 2</strong>ï¼šå› ä¸º [effectTrackDepth &lt;<br>maxMarkerBits]{.mark} ï¼Œæ‰€ä»¥æ‰§è¡Œ [initDepMarkers]{.mark} å‡½æ•°ï¼Œå› ä¸ºè¿™é‡Œçš„ [deps]{.mark} åœ¨åˆå§‹åŒ–çš„æ—¶å€™è¿˜æ˜¯ä¸ªç©ºæ•°ç»„ï¼Œæ‰€ä»¥æ­¤å‡½æ•°æœªæ‰§è¡Œã€‚</p>
<p>export const initDepMarkers = ({ deps }) =&gt; {</p>
<p>if (deps.length) {</p>
<p>for (let i = 0; i &lt; deps.length; i++) {</p>
<p>deps[i].w |= trackOpBit // set was tracked</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p><strong>Step<br>3</strong>ï¼šæ‰§è¡Œ [this.fn]{.mark} å‡½æ•°ï¼Œå…ˆè®¿é—® [state.show]{.mark}ï¼Œè§¦å‘äº† [trackEffects]{.mark}ã€‚</p>
<p>export function trackEffects(dep) {</p>
<p>let shouldTrack = false</p>
<p>if (effectTrackDepth &lt;= maxMarkerBits) {</p>
<p>// å¦‚æœæœ¬è½®å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­å·²ç»è®¿é—®å¹¶æ”¶é›†è¿‡ï¼Œåˆ™ä¸ç”¨å†æ”¶é›†è¯¥ä¾èµ–</p>
<p>if (!newTracked(dep)) {</p>
<p>// è®¾ç½® dep.n</p>
<p>dep.n |= trackOpBit</p>
<p>shouldTrack = !wasTracked(dep)</p>
<p>}</p>
<p>} else {</p>
<p>// Full cleanup mode.</p>
<p>shouldTrack = !dep.has(activeEffect!)</p>
<p>}</p>
<p>if (shouldTrack) {</p>
<p>dep.add(activeEffect!)</p>
<p>activeEffect!.deps.push(dep)</p>
<p>}</p>
<p>}</p>
<p>è¿™é‡Œéœ€è¦é¢å¤–äº†è§£ 2<br>ä¸ªå‡½æ•°ï¼š[wasTracked]{.mark}ï¼ˆå·²ç»è¢«æ”¶é›†è¿‡ï¼Œç¼©å†™æ˜¯ [w]{.mark}ï¼‰<br>å’Œ [newTracked]{.mark}ï¼ˆæ–°æ”¶é›†çš„ä¾èµ–ï¼Œç¼©å†™æ˜¯ [n]{.mark}ï¼‰ã€‚</p>
<p>export const wasTracked = dep =&gt; (dep.w &amp; trackOpBit) &gt; 0</p>
<p>export const newTracked = dep =&gt; (dep.n &amp; trackOpBit) &gt; 0</p>
<p>è¿›å…¥ [trackEffects]{.mark} æ—¶ï¼Œå› ä¸ºæ­¤æ—¶è¿˜æ²¡æœ‰ä¸º [dep.n]{.mark} è¿›è¡Œæˆ–è¿ç®—èµ‹å€¼ï¼Œæ‰€ä»¥ [state.show]{.mark} çš„ [newTracked<br>= false]{.mark}ï¼Œ[wasTracked = false]{.mark}ã€‚</p>
<p>æ‰€ä»¥è®¡ç®—å¾—åˆ° [shouldTrack =<br>true]{.mark}ï¼Œæœ€åå°† [activeEffect]{.mark} æ”¶é›†è¿›å…¥ [dep]{.mark} ä¸­ï¼ŒåŒæ—¶æ‰§è¡Œäº† [activeEffect.deps.push(dep)]{.mark} å°† [dep]{.mark} å­˜å…¥äº† [activeEffect]{.mark} çš„ [deps]{.mark} ä¸­ã€‚ç„¶åè®¿é—® [state.a]{.mark} é‡å¤ä¸Šè¿°æ“ä½œã€‚ä¸Šè¿°æ­¥éª¤æ‰§è¡Œå®Œæˆåçš„ [activeEffect.deps]{.mark} å¦‚ä¸‹ï¼š</p>
<p>[</p>
<p>{&quot;w&quot;:0,&quot;n&quot;: 00000000000000000000000000000010, [effect]},</p>
<p>{&quot;w&quot;:0,&quot;n&quot;: 00000000000000000000000000000010, [effect]}</p>
<p>]</p>
<p><strong>Step 4</strong>ï¼šæœ€åæ‰§è¡Œ [finalizeDepMarkers]{.mark} å‡½æ•°ï¼Œæ ¹æ®ç¬¬ 3<br>æ­¥ï¼Œæ­¤æ—¶ [effect]{.mark} ä¸­çš„ [deps]{.mark} åŒ…å«äº† 2<br>ä¸ª [dep]{.mark}ï¼Œåˆ†åˆ«æ˜¯ [state.show]{.mark} å’Œ [state.a]{.mark}ã€‚ [finalizeDepMarkers]{.mark} å‡½æ•°å†…éƒ¨æ‰§è¡Œäº† [wasTracked]{.mark}ï¼ˆå·²ç»è¢«æ”¶é›†è¿‡ï¼Œç¼©å†™æ˜¯ [w]{.mark}ï¼‰<br>å’Œ [newTracked]{.mark}ï¼ˆæ–°æ”¶é›†çš„ä¾èµ–ï¼Œç¼©å†™æ˜¯ [n]{.mark}ï¼‰<br>å‡½æ•°ï¼Œå› ä¸º [dep.w = 0]{.mark} æ‰€ä»¥ [wasTracked = false]{.mark}ã€‚</p>
<p>export const finalizeDepMarkers = (effect: ReactiveEffect) =&gt;<br>{</p>
<p>const { deps } = effect</p>
<p>if (deps.length) {</p>
<p>let ptr = 0</p>
<p>for (let i = 0; i &lt; deps.length; i++) {</p>
<p>const dep = deps[i]</p>
<p>if (wasTracked(dep) &amp;&amp; !newTracked(dep)) {</p>
<p>dep.delete(effect)</p>
<p>} else {</p>
<p>// ç¼©å°ä¾èµ–é›†åˆçš„å¤§å°</p>
<p>deps[ptr++] = dep</p>
<p>}</p>
<p>// clear bits</p>
<p>dep.w &amp;= ~trackOpBit</p>
<p>dep.n &amp;= ~trackOpBit</p>
<p>}</p>
<p>deps.length = ptr</p>
<p>}</p>
<p>}</p>
<p>å› ä¸º [wasTracked =<br>false]{.mark}ï¼Œå› æ­¤ [finalizeDepMarkers]{.mark} å¤„ç†åä»ç„¶å°†å‰¯ä½œç”¨å‡½æ•°ä¿ç•™åœ¨è¿™ä¸¤ä¸ªå±æ€§å¯¹åº”çš„ä¾èµ–é›†åˆä¸­ï¼ŒåŒæ—¶æŠŠ [dep.w]{.mark} å’Œ [dep.n]{.mark} é‡ç½®å›<br>0ã€‚</p>
<p>[{&quot;w&quot;:0, &quot;n&quot;:0, [effect]},{&quot;w&quot;:0, &quot;n&quot;:0,<br>[effect]}]</p>
<p><strong>Step 5</strong>ï¼šå½“æ‰§è¡Œ [state.show =<br>false]{.mark} çš„æ—¶å€™ï¼Œè§¦å‘ [effect.run]{.mark} çš„æ‰§è¡Œï¼Œæ­¤æ—¶æ‰§è¡Œ [initDepMarkers]{.mark} æ—¶ï¼Œå› ä¸ºå·²ç»å­˜åœ¨äº† [dep]{.mark}ï¼Œæ‰€ä»¥å…ˆè®¿é—® [state.show]{.mark}ã€‚</p>
<p>å½“æ‰§è¡Œåˆ° [trackEffects]{.mark} æ—¶ï¼Œæ­¤æ—¶çš„ [newTracked =<br>false]{.mark}ï¼Œæ‰§è¡Œé€»è¾‘å’Œä¹‹å‰ä¸€è‡´ã€‚åªä¸è¿‡å› ä¸º [state.show =<br>false]{.mark}ï¼Œæ‰€ä»¥æ²¡æœ‰è§¦å‘ [state.a]{.mark} çš„è¿™ä¸€éƒ¨åˆ†é€»è¾‘çš„å¤„ç†ï¼Œæœ€åå¾—åˆ°çš„ç»“æœä¸ºï¼š</p>
<p>[</p>
<p>{</p>
<p>&quot;w&quot;: 00000000000000000000000000000010,</p>
<p>&quot;n&quot;: 00000000000000000000000000000010,</p>
<p>[effect]</p>
<p>},</p>
<p>{</p>
<p>&quot;w&quot;: 00000000000000000000000000000010,</p>
<p>&quot;n&quot;: 0,</p>
<p>[effect]</p>
<p>}</p>
<p>]</p>
<p><strong>Step 6</strong>ï¼šæœ€åæ‰§è¡Œ [finalizeDepMarkers]{.mark} æ—¶ï¼Œå¦‚ä¸‹ã€‚</p>
<p>if (wasTracked(dep) &amp;&amp; !newTracked(dep)) {</p>
<p>dep.delete(effect)</p>
<p>}</p>
<p>å› ä¸ºè¿™é‡Œçš„ [state.a]{.mark} çš„ [wasTracked =<br>true]{.mark} ä¸” [newTracked]{.mark} ä¸º [false]{.mark}ï¼Œæ‰€ä»¥æ‰§è¡Œäº† [dep.delete(effect)]{.mark} å°† [effect]{.mark} ä» [dep]{.mark} ä¸­è¸¢æ‰ã€‚</p>
<p><strong>Step<br>7</strong>ï¼š[1s]{.mark} åæ‰§è¡Œ [state.a++]{.mark} çš„æ“ä½œï¼Œç”±äº [state.a]{.mark} ä¸­æ²¡æœ‰ [effect]{.mark} äº†ï¼Œæ‰€ä»¥ä¸ä¼šæ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°ã€‚</p>
<p><strong>æ€»ç»“</strong>ï¼š [Vue]{.mark} åœ¨ç»„ä»¶çš„ [effect]{.mark} æ‰§è¡Œä¹‹å‰ï¼Œä¼šæ ¹æ® [dep]{.mark} çš„æ”¶é›†æ ‡è®°ä½ [w]{.mark} å’Œ [n]{.mark} æ¥è¿›è¡Œæ¸…ç†ä¾èµ–ï¼Œåˆ é™¤ä¹‹å‰ [state.a]{.mark} æ”¶é›†çš„ [effect]{.mark} ä¾èµ–ã€‚è¿™æ ·å½“æˆ‘ä»¬ä¿®æ”¹ [state.a]{.mark} æ—¶ï¼Œç”±äºå·²ç»æ²¡æœ‰ä¾èµ–äº†ï¼Œå°±ä¸ä¼šè§¦å‘ [effect]{.mark} é‡æ–°æ‰§è¡Œã€‚</p>
<p>å¦å¤–ï¼Œä¸ºäº†æ›´å®¹æ˜“å¸®åŠ©å°ä¼™ä¼´ä»¬ç†è§£ä¸Šè¿°çš„æµç¨‹ï¼Œæˆ‘ä¹Ÿç²¾å¿ƒåˆ¶ä½œäº†ä¸€ä¸ªåŠ¨ç”»æ¼”ç¤ºä¸Šè¿°æµç¨‹å’Œè¿‡ç¨‹ï¼š</p>
<p><img src="https://cdn-us.imgs.moe/2023/05/26/646f9fde38e7e.png" alt="æˆªå›¾.png"></p>
<p>æ³¨æ„ï¼Œå½“ [effectTrackDepth]{.mark} å¤§äº [30]{.mark} æ—¶ï¼Œä¼šè°ƒç”¨ [cleanup]{.mark} æ¥æ¸…ç†ä¾èµ–ï¼Œå…¶å® [cleanup]{.mark} çš„åŸç†å°±æ˜¯ä¾èµ–æ”¶é›†å‰å…¨éƒ¨åˆ é™¤æ‰€æœ‰çš„ [dep]{.mark}ï¼Œä¾èµ–æ”¶é›†æ—¶å†ä¸€ä¸ªä¸ªåŠ è¿›æ¥ï¼Œè¿™ä¸ªæ€§èƒ½å…¶å®æ˜¯æ¯”è¾ƒå·®çš„ï¼Œæ‰€ä»¥ [Vue<br>3.2]{.mark} æ”¹æˆäº†é€šè¿‡äºŒè¿›åˆ¶æ ‡è®°ä½çš„æ–¹å¼æ¥é€‰æ‹©æ€§åˆ é™¤å’Œæ·»åŠ ï¼Œæå‡äº†æ€§èƒ½ã€‚å…³äºè¿™éƒ¨åˆ†æ›´å¤šçš„ç»†èŠ‚ï¼Œå¯ä»¥å‚è€ƒ[è¿™ä¸ªPR]{.mark}ã€‚</p>
<p><strong>æ€»ç»“</strong></p>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šè®²å®Œäº† [Vue<br>3]{.mark} çš„å“åº”å¼åŸç†åŸºç¡€ï¼Œå¦‚æœæœ‰å°ä¼™ä¼´äº†è§£ [Vue<br>2]{.mark} çš„å“åº”å¼åŸç†ï¼Œåº”è¯¥æ¸…æ¥š [Vue2]{.mark} çš„å“åº”å¼åŸç†å¯ä»¥ç†è§£æˆå¦‚ä¸‹ä¸€å¹…å›¾ï¼š</p>
<p><img src="https://cdn-us.imgs.moe/2023/05/26/646f9fde76b9c.png" alt="æˆªå›¾.png"></p>
<p>åœ¨ [Vue<br>2]{.mark} ä¸­ï¼Œ[Watcher]{.mark} å°±æ˜¯ä¾èµ–ï¼Œæœ‰ä¸“é—¨é’ˆå¯¹ç»„ä»¶æ¸²æŸ“çš„ [render<br>watcher]{.mark}ã€‚</p>
<p>ä¾èµ–æ”¶é›†ï¼šç»„ä»¶åœ¨ </p>
<p>render çš„æ—¶å€™ä¼šè®¿é—®æ¨¡æ¿ä¸­çš„æ•°æ®ï¼Œè§¦å‘ </p>
<p>getter æŠŠ </p>
<p>watcher ä½œä¸ºä¾èµ–æ”¶é›†ã€‚</p>
<p>è§¦å‘æ¸²æŸ“ï¼šå½“ä¿®æ”¹æ•°æ®æ—¶ï¼Œä¼šè§¦å‘ </p>
<p>setterï¼Œé€šçŸ¥ </p>
<p>watcher æ›´æ–°ï¼Œè¿›è€Œè§¦å‘äº†ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</p>
<p>ç›¸åº”åœ°ï¼Œåœ¨ [Vue 3]{.mark} ä¸­çš„å“åº”å¼æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn-us.imgs.moe/2023/05/26/646f9fde778cf.png" alt="æˆªå›¾.png"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ[Vue 3]{.mark} ç›¸å¯¹äº [Vue<br>2]{.mark} çš„å“åº”å¼å·®åˆ«ä¸å¤§ï¼Œä¸»è¦å°±æ˜¯åŠ«æŒæ•°æ®çš„æ–¹å¼æ”¹æˆç”¨ [Proxy]{.mark} å®ç°ï¼Œä»¥åŠæ”¶é›†çš„ä¾èµ–ç”± [watcher]{.mark} å®ä¾‹å˜æˆäº†ç»„ä»¶å‰¯ä½œç”¨å‡½æ•° [effect]{.mark}ã€‚å¦å¤–ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ [Vue<br>3]{.mark} åœ¨å“åº”å¼è®¾è®¡ä¸Šåˆå¤šè€ƒè™‘äº†å±‚çº§åµŒå¥—çš„ä¾èµ–æ”¶é›†é—®é¢˜å’Œä¸å¿…è¦çš„ä¾èµ–æ¸…ç†é—®é¢˜ã€‚</p>
</div><div class="article-tags size-small is-uppercase mb-4"><i class="fas fa-tags has-text-grey"></i>Â <a class="link-muted mr-2" rel="tag" href="/tags/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a></div><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7">#Â æ¨èæ–‡ç« </span><br><span>Â Â 1.<a class="is-size-6" href="/posts/39441e6f/" target="_blank">å“åº”å¼åŸç†ï¼šVue 3 çš„ nextTick ï¼Ÿ</a><br></span><span>Â Â 2.<a class="is-size-6" href="/posts/91e84f90/" target="_blank">å“åº”å¼åŸç†ï¼šå‰¯ä½œç”¨å‡½æ•°æ¢ç§˜</a><br></span><span>Â Â 3.<a class="is-size-6" href="/posts/bf54f4c/" target="_blank">å“åº”å¼åŸç†ï¼šåŸºäº Proxy çš„å“åº”å¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</a><br></span><span>Â Â 4.<a class="is-size-6" href="/posts/16c5c5d5/" target="_blank">æ¸²æŸ“å™¨ï¼šæ•°ç»„å­èŠ‚ç‚¹çš„ diff ç®—æ³•</a><br></span><span>Â Â 5.<a class="is-size-6" href="/posts/8d428288/" target="_blank">æ¸²æŸ“å™¨ï¼šç»„ä»¶æ˜¯å¦‚ä½•å®Œæˆæ›´æ–°çš„ï¼Ÿ</a><br></span></div></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Ÿæ‰“èµä¸€ä¸‹ä½œè€…å§</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>æ”¯ä»˜å®</span><span class="qrcode"><img src="https://cdn-us.imgs.moe/2023/05/26/646fb97e763cc.jpg" alt="æ”¯ä»˜å®"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>å¾®ä¿¡</span><span class="qrcode"><img src="https://cdn-us.imgs.moe/2023/05/26/646fb97e763da.jpg" alt="å¾®ä¿¡"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/posts/39441e6f/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">å“åº”å¼åŸç†ï¼šVue 3 çš„ nextTick ï¼Ÿ</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/posts/bf54f4c/"><span class="level-item">å“åº”å¼åŸç†ï¼šåŸºäº Proxy çš„å“åº”å¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</span><i class="level-item fas fa-chevron-right"></i></a></div></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><!--!--><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="https://p3-passport.byteimg.com/img/user-avatar/d8bc7351ac3c93b11cd3146be24a0cba~100x100.awebp" alt="çˆ·ã‚æœ¬éœ¸æ°”ã£"></figure><p class="title is-size-4 is-block line-height-inherit">çˆ·ã‚æœ¬éœ¸æ°”ã£</p><p class="is-size-6 is-block">æˆ‘æ¬²ä¹˜é£å»ï¼Œæ˜”å¹´åŒ–é¾™å½’</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>é¹åŸ</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ–‡ç« </p><a href="/archives"><p class="title">22</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">åˆ†ç±»</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ ‡ç­¾</p><a href="/tags"><p class="title">6</p></a></div></div></nav><hr><p id="hitokoto">:D èˆ”ç‹—æ—¥è®°è·å–ä¸­...</p><script type="text/javascript" defer>
                                // è·å–èˆ”ç‹—æ—¥è®°
                                const randomTianDogData = function (list) {
                                    // éšæœºå–å‡ºä¸€ä¸ªå…ƒç´ 
                                    const randomIndex = Math.floor(Math.random() * list.length); // ç”Ÿæˆ 0 åˆ° list.length-1 ä¹‹é—´çš„æ•´æ•°
                                    return list[randomIndex]; // æ ¹æ®éšæœºä¸‹æ ‡è·å–æ•°ç»„ä¸­çš„å…ƒç´ 
                                }
                                // è·å–å¹´æœˆæ—¥
                                const randomTianDogDate = function () {
                                    // è·å– 1970 å¹´ 1 æœˆ 1 æ—¥è‡³ä»Šçš„æ¯«ç§’æ•°èŒƒå›´
                                    const minTimestamp = new Date('2020-01-01').getTime();
                                    const maxTimestamp = new Date().getTime();
                        
                                    // ç”ŸæˆæŒ‡å®šèŒƒå›´å†…çš„éšæœºæ—¥æœŸ
                                    const randomTimestamp = Math.floor(Math.random() * (maxTimestamp - minTimestamp)) + minTimestamp;
                                    const randomDate = new Date(randomTimestamp);
                        
                                    // è·å–éšæœºæ—¥æœŸçš„å¹´ã€æœˆã€æ—¥
                                    const year = randomDate.getFullYear();
                                    const month = randomDate.getMonth() + 1;
                                    const day = randomDate.getDate();
                        
                                    return year + '-' + month + '-' + day // è¾“å‡ºéšæœºçš„å¹´æœˆæ—¥
                                }

                                function getYiyan(){
                                    $.when(
                                      $.getJSON('/json_data/weathers.json'),
                                      $.getJSON('/json_data/diaries.json')
                                    ).done(function(data1, data2) {
                                      // åœ¨è¿™é‡Œå¯¹ä¸¤ä¸ªæ¥å£çš„æ•°æ®è¿›è¡Œæ“ä½œ
                                      $('#hitokoto').html("");
                                      $('#hitokoto').append(
                                        "<p>" + randomTianDogDate() + "</p><p>" + randomTianDogData(data1[0]) + "</p>" +
                                        "<strong style='color: #3273dc;'>" + randomTianDogData(data2[0]) + "</strong>"
                                      );  
                                    }).fail(function() {
                                      console.log('Error: èˆ”ç‹—æ—¥è®°è·å–å¤±è´¥.');
                                    });
                                }
                                $(function (){getYiyan();$('#hitokoto').click(function(){getYiyan();})});</script></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">æœ€æ–°æ–‡ç« </h3><article class="media"><a class="media-left" href="/posts/658c93f2/"><p class="image is-64x64"><img class="thumbnail" src="https://cdn-us.imgs.moe/2023/05/26/646fa77438c98.png" alt="æ¨¡å—æ ‡å‡†ï¼šä¸ºä»€ä¹ˆ ESM æ˜¯å‰ç«¯æ¨¡å—åŒ–çš„æœªæ¥ï¼Ÿ"></p></a><div class="media-content size-small"><p><time dateTime="2022-09-17T11:13:16.000Z">2022-09-17</time></p><p class="title is-6"><a class="link-muted" href="/posts/658c93f2/">æ¨¡å—æ ‡å‡†ï¼šä¸ºä»€ä¹ˆ ESM æ˜¯å‰ç«¯æ¨¡å—åŒ–çš„æœªæ¥ï¼Ÿ</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey">Â </i><a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a> / <a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAVite/">æ·±å…¥æµ…å‡ºVite</a></p></div></article><article class="media"><a class="media-left" href="/posts/e76f424e/"><p class="image is-64x64"><img class="thumbnail" src="https://cdn-us.imgs.moe/2023/05/26/646fa4ee2fa1b.png" alt="è®© Vite åŠ©åŠ›ä½ çš„å‰ç«¯å·¥ç¨‹åŒ–ä¹‹è·¯"></p></a><div class="media-content size-small"><p><time dateTime="2022-09-07T11:13:16.000Z">2022-09-07</time></p><p class="title is-6"><a class="link-muted" href="/posts/e76f424e/">è®© Vite åŠ©åŠ›ä½ çš„å‰ç«¯å·¥ç¨‹åŒ–ä¹‹è·¯</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey">Â </i><a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a> / <a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAVite/">æ·±å…¥æµ…å‡ºVite</a></p></div></article><article class="media"><a class="media-left" href="/posts/39441e6f/"><p class="image is-64x64"><img class="thumbnail" src="https://cdn-us.imgs.moe/2023/05/26/646f9fde778cf.png" alt="å“åº”å¼åŸç†ï¼šVue 3 çš„ nextTick ï¼Ÿ"></p></a><div class="media-content size-small"><p><time dateTime="2022-08-27T11:13:16.000Z">2022-08-27</time></p><p class="title is-6"><a class="link-muted" href="/posts/39441e6f/">å“åº”å¼åŸç†ï¼šVue 3 çš„ nextTick ï¼Ÿ</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey">Â </i><a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a> / <a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5Vue3%E5%8E%9F%E7%90%86/">æ·±å…¥Vue3åŸç†</a></p></div></article><article class="media"><a class="media-left" href="/posts/91e84f90/"><p class="image is-64x64"><img class="thumbnail" src="https://cdn-us.imgs.moe/2023/05/26/646f9fde38e7e.png" alt="å“åº”å¼åŸç†ï¼šå‰¯ä½œç”¨å‡½æ•°æ¢ç§˜"></p></a><div class="media-content size-small"><p><time dateTime="2022-08-17T11:13:16.000Z">2022-08-17</time></p><p class="title is-6"><a class="link-muted" href="/posts/91e84f90/">å“åº”å¼åŸç†ï¼šå‰¯ä½œç”¨å‡½æ•°æ¢ç§˜</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey">Â </i><a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a> / <a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5Vue3%E5%8E%9F%E7%90%86/">æ·±å…¥Vue3åŸç†</a></p></div></article><article class="media"><a class="media-left" href="/posts/bf54f4c/"><p class="image is-64x64"><img class="thumbnail" src="https://cdn-us.imgs.moe/2023/05/26/646f9dbdbc919.png" alt="å“åº”å¼åŸç†ï¼šåŸºäº Proxy çš„å“åº”å¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ"></p></a><div class="media-content size-small"><p><time dateTime="2022-08-07T11:13:16.000Z">2022-08-07</time></p><p class="title is-6"><a class="link-muted" href="/posts/bf54f4c/">å“åº”å¼åŸç†ï¼šåŸºäº Proxy çš„å“åº”å¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey">Â </i><a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a> / <a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5Vue3%E5%8E%9F%E7%90%86/">æ·±å…¥Vue3åŸç†</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">åˆ†ç±»</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/%E5%89%8D%E7%AB%AF/"><span class="level-start"><span class="level-item">å‰ç«¯</span></span><span class="level-end"><span class="level-item tag">10</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5Vue3%E5%8E%9F%E7%90%86/"><span class="level-start"><span class="level-item">æ·±å…¥Vue3åŸç†</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%89%8D%E7%AB%AF/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAVite/"><span class="level-start"><span class="level-item">æ·±å…¥æµ…å‡ºVite</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"><span class="level-start"><span class="level-item">å·¥å…·æ•™ç¨‹</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/%E4%B8%BB%E9%A2%98%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item">ä¸»é¢˜å·¥å…·</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%96%87%E7%AB%A0%E5%8A%A0%E5%AF%86/"><span class="level-start"><span class="level-item">æ–‡ç« åŠ å¯†</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%B3%95%E5%BE%8B/"><span class="level-start"><span class="level-item">æ³•å¾‹</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">å½’æ¡£</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2022/09/"><span class="level-start"><span class="level-item">ä¹æœˆ 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2022/08/"><span class="level-start"><span class="level-item">å…«æœˆ 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2022/07/"><span class="level-start"><span class="level-item">ä¸ƒæœˆ 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2022/06/"><span class="level-start"><span class="level-item">å…­æœˆ 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/01/"><span class="level-start"><span class="level-item">ä¸€æœˆ 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><a class="level is-mobile is-marginless" href="/archives/"><span class="level-start"><span class="level-item">æŸ¥çœ‹å…¨éƒ¨&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">æ ‡ç­¾</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/%E5%89%8D%E7%AB%AF/"><span class="tag">å‰ç«¯</span><span class="tag is-grey-lightest">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B3%95%E5%BE%8B/"><span class="tag">æ³•å¾‹</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"><span class="tag">å·¥å…·æ•™ç¨‹</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo%E4%B8%BB%E9%A2%98/"><span class="tag">hexoä¸»é¢˜</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/icarus%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/"><span class="tag">icarusä¸»é¢˜é…ç½®</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8A%A0%E5%AF%86%E6%96%87%E7%AB%A0/"><span class="tag">åŠ å¯†æ–‡ç« </span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><!--!--></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://s1.ax1x.com/2023/05/25/p9H4zND.png" alt="çˆ·ã‚æœ¬éœ¸æ°”ã£" height="28"></a><p class="size-small"><span>&copy; 2023 çˆ·ã‚æœ¬éœ¸æ°”ã£</span>Â Â Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>,Modify by <a href="https://github.com/Leon9916/hexo-blog" target="_blank">removeif</a>Â <br>Â© ç‰ˆæƒ2è¯´æ˜ï¼š[æœ¬ç½‘ç«™æ‰€æœ‰å†…å®¹å‡æ”¶é›†äºäº’è”ç½‘æˆ–è‡ªå·±åˆ›ä½œ,<br>Â Â Â Â æ–¹ä¾¿äºè‡ªå·±å­¦ä¹ äº¤æµï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·<a href="mailto:2476288442@qq.com">è”ç³»</a>ï¼Œç«‹å³å¤„ç†]<br><script type="text/javascript" src="/js/statistics.js"></script><span id="statistic-times">ç½‘ç«™è¿è¡Œæ—¶é—´ç»Ÿè®¡åŠ è½½ä¸­...</span></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://removeif.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back-to-top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script src="/js/gallery.js" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script src="/js/comment-issue-data.js" defer></script><link rel="stylesheet" href="/css/insight.css"><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input class="searchbox-input ins-search-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."><span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>(function (window) {
            var INSIGHT_CONFIG = {
                TRANSLATION: {
                    POSTS: 'æ–‡ç« ',
                    PAGES: 'é¡µé¢',
                    CATEGORIES: 'åˆ†ç±»',
                    TAGS: 'æ ‡ç­¾',
                    UNTITLED: '(æ— æ ‡é¢˜)',
                },
                CONTENT_URL: '/content.json',
            };
            window.INSIGHT_CONFIG = INSIGHT_CONFIG;
        })(window);</script><script src="/js/insight.js" defer></script></body></html>